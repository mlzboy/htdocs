<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>首页</title>
    <style>::-webkit-scrollbar{display:none;}html,body{overflow:hidden;margin:0;}</style>
</head>
<body>
<div id="c1"></div>
<script>/*Fixing iframe window.innerHeight 0 issue in Safari*/document.body.clientHeight;</script>
    <script src="https://gw.alipayobjects.com/os/antv/assets/g6/1.2.8/g6.min.js"></script>
<script src="/plugins.js"></script>
<script src="/jquery-3.2.1.min.js"></script>
<script src="/d3-4.13.0.min.js"></script>
<script>

  var _d = d3,
    forceSimulation = _d.forceSimulation,
    forceLink = _d.forceLink,
    forceManyBody = _d.forceManyBody,
    forceCenter = _d.forceCenter,
    forceCollide = _d.forceCollide;



		
/*

  var graph = new G6.Graph({
    id: 'mountNode', // dom id
    height: window.innerHeight,
    //plugins: [template, nodeSizeMapper, nodeColorMapper, edgeSizeMapper],
    animate: true,
    layout: {
      //processer: force
    }
  });

*/
  var dagre = new G6.Layouts['Dagre']({
    nodesep: function nodesep() {
      return graph.getWidth() / 50;
    },
    ranksep: function ranksep() {
      return graph.getHeight() / 25;
    },
    marginx: function marginx() {
      return graph.getWidth() / 8;
    },
    marginy: function marginy() {
      return graph.getHeight() / 8;
    },

    useEdgeControlPoint: false
  });


  
  
  
  
  
  
  var data={"nodes":[{"name":"Myriel","id":"0.0",label:"n1",color:"red",shape:"rect"},
  {"name":"Napoleon","id":"1.0",label:"n2",shape:'circle'},
  {"name":"MlleBaptistine","id":"2.0",label:"n3"},
  {"name":"n3","id":"3.0",label:"n4"}],
  "edges":[{"source":"0.0","target":"1.0","id":"0"},
  {"source":"2.0","target":"0.0","id":"1"},
  {"source":"2.0","target":"3.0","id":"2"}]};
  
  
  

  

  
  
  
  
  
  
  var net = new G6.Net({
    id: 'c1', // 容器ID
    height: window.innerHeight,        // 画布高
    useAnchor: null
  });
  net.source(data.nodes, data.edges);
  net.node()
    .color('#36E6BE')
    .size(function(obj){
      var sizeDomain = 100;
      return obj.value/100 * sizeDomain;
    });
  net.edge()
    .size(function(obj){
      var sizeDomain = 10;
      return obj.value/100 * sizeDomain;
    })
    .label('value');
  net.render();
  layout.onNodeChange = function(id, point){
    var node = net.find(id);
    net.update(node, {
      x: point.x*60+300,
      y: point.y*60+300
    });
    net.refresh();
  };
  
  
  
  


</script>
</body>
</html>
